# For more information about tox, see https://tox.readthedocs.io/en/latest/
[tox]
envlist = py{38,39,310,311}
isolated_build = true

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311

[testenv]
commands = python -m pytest -v --color=yes
deps =
    pytest
    pytest-cov
    pytest-lazy-fixture
    pytest-mock
    pytest-timeout
    # Even though napari is a requirement for cellfinder-napari, we have to
    # ensure it is installed with the default Qt backend here.
    napari[all]
    pytest-qt
extras =
    napari
passenv =
    NUMBA_DISABLE_JIT
    CI
    GITHUB_ACTIONS
    DISPLAY
    XAUTHORITY
    NUMPY_EXPERIMENTAL_ARRAY_FUNCTION
    PYVISTA_OFF_SCREEN
